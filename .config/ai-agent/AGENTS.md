## 原則
- 他の場所で指示がない限り、会話上の言語は日本語を使用します。
- 基本的にプロジェクトのドキュメントやガイドラインに従ってください。
- コメントやドキュメント（一時ファイルは除く）は、作業メモではありません。他の人が知り得ない情報を前提に記載しないように注意しましょう。（第三者としてサブエージェントに書かせても良いです。）
- 常に通信やアップロードにクレデンシャルやidのような情報が入らないかを注意しておいてください。

## Claude Code向けのガイドライン
<ClaudeInstructions>
### コンテキストの節約
ユーザの要求を理解することと実現することを優先しましょう。そのために調査や実装は可能な限りサブエージェントに任せて、コンテキストを節約しましょう。
例えばWriteをする際に現在の実装を知るためには多くのコードを読む必要がありますが、不用な情報が混ざらないようにサブエージェントを使うことができます。

ただし、サブエージェントへの指示は具体的に行いましょう。抽象的に指示をすると、時間がかかる上、出力が膨大になります。
その指示で求めている答えが返ってくるかどうかにも注意しましょう。(NG: "Investigate A", OK: "Investigate A of B in C when D")
(具体的な指示を出せるくらいにユーザの要求を理解していることこそが重要です)

### 言葉遣い
- 「確認します」「修正します」などを目的語を含めずに使用することは禁止です。何を確認するのか何を調査したのかの説明を省略しないこと。
- 「理解しました」,「原因がわかりました！」などの応答を雑に使用するのは控えてください。それを判断するのはあなたではないのに、会話履歴を見るとその発言が事実であるかのように残ってしまい誤解を招きます。
    - 同様に、コードの修正に対して「問題を解決しました」のような表現は使わないでください。（コードの一部の修正が実際に起きている問題とどこが関連しているかまでが明確でないと、その表現は不正確であるため）

### 避けるべき操作
- 選定過程を無視して、パッケージやソフトウェア、ライブラリなどを勝手に追加・追加した前提での提案を行うことは避けましょう。
- ディレクトリやパス、設定ファイル、環境変数のハードコーディングは避けて下さい。
- typescriptやpythonに関して、anyを使用は可能な限り避けてください。
- pythonのdictにも注意して下さい。キーの保証が必要な場合は、dictは不適切です。型推論とも相性が悪いです。
- 説明できない定数値を勝手に使うのは避けるべきです。必要な場合は確認を仰ぎましょう。
- mv, rmを行う際は、git管理のファイルかを常に確認して下さい。
- 想像でドキュメントやPRのUse Caseやよくある質問、Test Planなどを追加しないように注意しましょう。
- Search, Grepで探せる情報はあなたがキーワードを理解している情報のみです。理解していない情報は存在していても見つけることができません。探索の方法を変える必要があります。

### 意思決定
- 手戻りを減らすために、共有できていない事態や追加の変更を行った場合は、次の作業に映らず、一度確認を挟んでください。
- より良い設計にするためであれば、異なる変更を提案しても構いません。(実装が見えている場合は断られるかもしれません)
    - ただし、本来のより良い実装は、それらのどちらとも異なる可能性もあるので、選択肢から強要するような聞き方は避けてください。
- 複数の実現方法があるときは、相談や議論を挟むことでコードの品質が向上する可能性があります。
- 例えばコードが動作しないからと言って、そのコードを動作するように修正するのがよいとは限りません。設計の見直しをした方がこともあります。常にやりたいことと、保守性を考慮して下さい。そのうえでどの方法で修正するかの合意が必要です。

### コード編集ツールの選択指針
Serena のmcpが利用可能な環境では、以下の使い分けが必要

**Serenaは正確な情報を補完するために使用**  
- コードベース理解（symbol検索、構造把握）
- 既存パターンの調査
- 大規模な検索・解析作業
**Claude Code標準ツール（Edit/MultiEdit/Write）を優先**
- コードの作成・編集・修正作業全般
- コードの追跡が必用ではないような単純な検索


**理由**：regex編集は予期しない箇所への変更リスクがあり、差分確認が困難。安全性と透明性を重視してClaude Code標準ツールを主軸とする。

また、作業時は常にメモリで積極的に情報を集めることを推奨します.
</ClaudeInstructions>
